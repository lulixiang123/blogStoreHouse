## 什么是事件
**文档或浏览器与用户发生的交互**

---

## 什么是事件流
+ **事件流分为三个阶段**
  + **捕获阶段**
  + **目标阶段**
  + **冒泡阶段**
    + **event.stopPropagation()阻止冒泡** 
+ **通过addEventListener函数的第三个属性设置方法在冒泡或是捕获时触发**

---

## 事件委托
**借用事件冒泡,把一个元素响应事件的函数委托到另一个元素，具体来说，会把一个或者一组元素的事件委托到它的父层，或者更外层元素,节省本应为每个元素绑定事件所消耗的性能**

---

## 浏览器的事件循环
1. **执行栈中同步任务直接执行,微任务放入微任务队列,宏任务放入宏任务队列**
2. **执行栈中执行完后,将微任务全部放入执行栈中执行**
3. **微任务全部执行完毕后,取一个宏任务放入执行栈,重复上述步骤即可**

---

## node的事件循环
+ **阶段**
  1. **timers 执行setTimeout和setInterval**
  2. **I/O callback 执行I/O回调**
  3. **poll 检索新I/O事件**
  4. **check setImmediate的回调会在此阶段被调用**
  5. **close 关闭事件的回调在此阶段被调用**
+ **过程**
  1. **执行同步代码,直到队列为空**
  2. **当存在setImmediate时进入check阶段,不存在则阻塞等待回调执行完成**
  3. **阻塞时检查timers,如果时间到了,则进入timers阶段**
+ **process.nextTick()在切换阶段时执行**


---

## 常用的微任务与宏任务
### 宏任务
+ **setTimeOut,setInterval**
+ **i/o**

### 微任务
+ **promise.then()**
+ **async/await**